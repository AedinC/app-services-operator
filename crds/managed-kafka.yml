apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  # name must match the spec fields below, and be in the form: <plural>.<group>
  name: managedkafkas.operators.coreos.com
spec:
  # group name to use for REST API: /apis/<group>/<version>
  group: operators.coreos.com
  # list of versions supported by this CustomResourceDefinition
  versions:
    - name: v1alpha1
      # Each version can be enabled/disabled by Served flag.
      served: true
      # One and only one version must be marked as the storage version.
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              allOf:
                properties:
                  bootstrapServer:
                    type: object
                    description: 'The kafka bootstrap server to use'
                    allOf:
                      properties:
                        host:
                          description: 'The hostname for the managed kafka bootstrap server'
                          type: string
                          pattern:
                  credentials:
                    description: 'The credentials to use to access the Managed Kafka'
                    type: object
                    properties:
                      kind:
                        description: 'The kind of credentials in use'
                        type: string
                        enum: [clientCredentials]
                      clientId:
                        description: The ClientID used for the client credential. Can only be used if the credentials kind is clientCredentials.
                        properties:
                          value:
                            description: 'The client ID'
                            type: string
                          valueFrom:
                            description: Source for the client ID's value. Cannot be used if value is not empty.
                            properties:
                              configMapKeyRef:
                                description: Selects a key of a ConfigMap.
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                    TODO: Add other useful fields. apiVersion, kind, uid?'
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or its key
                                      must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                              fieldRef:
                                description: 'Selects a field of the pod: supports metadata.name,
                                                metadata.namespace, metadata.labels, metadata.annotations,
                                                spec.nodeName, spec.serviceAccountName, status.hostIP,
                                                status.podIP.'
                                properties:
                                  apiVersion:
                                    description: Version of the schema the FieldPath is
                                      written in terms of, defaults to "v1".
                                    type: string
                                  fieldPath:
                                    description: Path of the field to select in the specified
                                      API version.
                                    type: string
                                required:
                                  - fieldPath
                                type: object
                              resourceFieldRef:
                                description: 'Selects a resource of the container: only
                                                resources limits and requests (limits.cpu, limits.memory,
                                                limits.ephemeral-storage, requests.cpu, requests.memory
                                                and requests.ephemeral-storage) are currently supported.'
                                properties:
                                  containerName:
                                    description: 'Container name: required for volumes,
                                                    optional for env vars'
                                    type: string
                                  divisor:
                                    description: Specifies the output format of the exposed
                                      resources, defaults to "1"
                                    type: string
                                  resource:
                                    description: 'Required: resource to select'
                                    type: string
                                required:
                                  - resource
                                type: object
                              secretKeyRef:
                                description: Selects a key of a secret in the pod's namespace
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                    TODO: Add other useful fields. apiVersion, kind, uid?'
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its key must
                                      be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                            type: object
                        type: object
                clientSecret:
                  valueFrom:
                    type: object
                    properties:
                      clientId:
                        description: The ClientSecret used for the client credential. Can only be used if the credentials kind is clientCredentials.
                        properties:
                          value:
                            description: 'The client secret'
                            type: string
                          valueFrom:
                            description: Source for the client secret's value. Cannot be used if value is not empty.
                            properties:
                              configMapKeyRef:
                                description: Selects a key of a ConfigMap.
                                properties:
                                  key:
                                    description: The key to select.
                                    type: string
                                  name:
                                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                                          TODO: Add other useful fields. apiVersion, kind, uid?'
                                    type: string
                                  optional:
                                    description: Specify whether the ConfigMap or its key
                                      must be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                              fieldRef:
                                description: 'Selects a field of the pod: supports metadata.name,
                                                                      metadata.namespace, metadata.labels, metadata.annotations,
                                                                      spec.nodeName, spec.serviceAccountName, status.hostIP,
                                                                      status.podIP.'
                                properties:
                                  apiVersion:
                                    description: Version of the schema the FieldPath is
                                      written in terms of, defaults to "v1".
                                    type: string
                                  fieldPath:
                                    description: Path of the field to select in the specified
                                      API version.
                                    type: string
                                required:
                                  - fieldPath
                                type: object
                              resourceFieldRef:
                                description: 'Selects a resource of the container: only
                                                                      resources limits and requests (limits.cpu, limits.memory,
                                                                      limits.ephemeral-storage, requests.cpu, requests.memory
                                                                      and requests.ephemeral-storage) are currently supported.'
                                properties:
                                  containerName:
                                    description: 'Container name: required for volumes,
                                                                          optional for env vars'
                                    type: string
                                  divisor:
                                    description: Specifies the output format of the exposed
                                      resources, defaults to "1"
                                    type: string
                                  resource:
                                    description: 'Required: resource to select'
                                    type: string
                                required:
                                  - resource
                                type: object
                              secretKeyRef:
                                description: Selects a key of a secret in the pod's namespace
                                properties:
                                  key:
                                    description: The key of the secret to select from.  Must
                                      be a valid secret key.
                                    type: string
                                  name:
                                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                                                                          TODO: Add other useful fields. apiVersion, kind, uid?'
                                    type: string
                                  optional:
                                    description: Specify whether the Secret or its key must
                                      be defined
                                    type: boolean
                                required:
                                  - key
                                type: object
                            type: object
                        type: object



  # either Namespaced or Cluster
  scope: Cluster
  names:
    # plural name to be used in the URL: /apis/<group>/<version>/<plural>
    plural: managedkafkas
    # singular name to be used as an alias on the CLI and for display
    singular: managedkafka
    # kind is normally the CamelCased singular type. Your resource manifests use this.
    kind: ManagedKafkaConnection
    # shortNames allow shorter string to match your resource on the CLI
    shortNames:
      - mk
